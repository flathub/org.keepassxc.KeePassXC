From 2d4ea19241963aab421ceab17ef68258dca51c39 Mon Sep 17 00:00:00 2001
From: AsavarTzeth <asavartzeth@gmail.com>
Date: Tue, 19 Feb 2019 21:44:32 +0100
Subject: [PATCH 5/5] Use app id for mime types

---
 share/CMakeLists.txt                                |   4 ++--
 ...-x-keepassxc.png => org.keepassxc.KeePassXC.png} | Bin
 ...-x-keepassxc.png => org.keepassxc.KeePassXC.png} | Bin
 ...-x-keepassxc.png => org.keepassxc.KeePassXC.png} | Bin
 ...-x-keepassxc.png => org.keepassxc.KeePassXC.png} | Bin
 ...-x-keepassxc.png => org.keepassxc.KeePassXC.png} | Bin
 ...-keepassxc.svgz => org.keepassxc.KeePassXC.svgz} | Bin
 .../{keepassxc.xml => org.keepassxc.KeePassXC.xml}  |   2 +-
 8 files changed, 3 insertions(+), 3 deletions(-)
 rename share/icons/application/128x128/mimetypes/{application-x-keepassxc.png => org.keepassxc.KeePassXC.png} (100%)
 rename share/icons/application/16x16/{mimetypes/application-x-keepassxc.png => org.keepassxc.KeePassXC.png} (100%)
 rename share/icons/application/22x22/mimetypes/{application-x-keepassxc.png => org.keepassxc.KeePassXC.png} (100%)
 rename share/icons/application/32x32/mimetypes/{application-x-keepassxc.png => org.keepassxc.KeePassXC.png} (100%)
 rename share/icons/application/64x64/mimetypes/{application-x-keepassxc.png => org.keepassxc.KeePassXC.png} (100%)
 rename share/icons/application/scalable/mimetypes/{application-x-keepassxc.svgz => org.keepassxc.KeePassXC.svgz} (100%)
 rename share/linux/{keepassxc.xml => org.keepassxc.KeePassXC.xml} (85%)

diff --git a/share/CMakeLists.txt b/share/CMakeLists.txt
index 56c41419..64da9430 100644
--- a/share/CMakeLists.txt
+++ b/share/CMakeLists.txt
@@ -28,11 +28,11 @@ if(UNIX AND NOT APPLE)
             FILES_MATCHING PATTERN "keepassx*.png" PATTERN "keepassx*.svgz"
             PATTERN "status" EXCLUDE PATTERN "actions" EXCLUDE PATTERN "categories" EXCLUDE)
     install(DIRECTORY icons/application/ DESTINATION ${CMAKE_INSTALL_DATADIR}/icons/hicolor
-            FILES_MATCHING PATTERN "application-x-keepassxc.png" PATTERN "application-x-keepassxc.svgz"
+	    FILES_MATCHING PATTERN "org.keepassxc.KeePassXC.png" PATTERN "org.keepassxc.KeePassXC.svgz"
             PATTERN "status" EXCLUDE PATTERN "actions" EXCLUDE PATTERN "categories" EXCLUDE)
     install(FILES linux/org.keepassxc.KeePassXC.desktop DESTINATION ${CMAKE_INSTALL_DATADIR}/applications)
     install(FILES linux/org.keepassxc.KeePassXC.appdata.xml DESTINATION ${CMAKE_INSTALL_DATADIR}/metainfo)
-    install(FILES linux/keepassxc.xml DESTINATION ${CMAKE_INSTALL_DATADIR}/mime/packages)
+    install(FILES linux/org.keepassxc.KeePassXC.xml DESTINATION ${CMAKE_INSTALL_DATADIR}/mime/packages)
 endif(UNIX AND NOT APPLE)
 
 if(APPLE)
diff --git a/share/icons/application/128x128/mimetypes/application-x-keepassxc.png b/share/icons/application/128x128/mimetypes/org.keepassxc.KeePassXC.png
similarity index 100%
rename from share/icons/application/128x128/mimetypes/application-x-keepassxc.png
rename to share/icons/application/128x128/mimetypes/org.keepassxc.KeePassXC.png
diff --git a/share/icons/application/16x16/mimetypes/application-x-keepassxc.png b/share/icons/application/16x16/org.keepassxc.KeePassXC.png
similarity index 100%
rename from share/icons/application/16x16/mimetypes/application-x-keepassxc.png
rename to share/icons/application/16x16/org.keepassxc.KeePassXC.png
diff --git a/share/icons/application/22x22/mimetypes/application-x-keepassxc.png b/share/icons/application/22x22/mimetypes/org.keepassxc.KeePassXC.png
similarity index 100%
rename from share/icons/application/22x22/mimetypes/application-x-keepassxc.png
rename to share/icons/application/22x22/mimetypes/org.keepassxc.KeePassXC.png
diff --git a/share/icons/application/32x32/mimetypes/application-x-keepassxc.png b/share/icons/application/32x32/mimetypes/org.keepassxc.KeePassXC.png
similarity index 100%
rename from share/icons/application/32x32/mimetypes/application-x-keepassxc.png
rename to share/icons/application/32x32/mimetypes/org.keepassxc.KeePassXC.png
diff --git a/share/icons/application/64x64/mimetypes/application-x-keepassxc.png b/share/icons/application/64x64/mimetypes/org.keepassxc.KeePassXC.png
similarity index 100%
rename from share/icons/application/64x64/mimetypes/application-x-keepassxc.png
rename to share/icons/application/64x64/mimetypes/org.keepassxc.KeePassXC.png
diff --git a/share/icons/application/scalable/mimetypes/application-x-keepassxc.svgz b/share/icons/application/scalable/mimetypes/org.keepassxc.KeePassXC.svgz
similarity index 100%
rename from share/icons/application/scalable/mimetypes/application-x-keepassxc.svgz
rename to share/icons/application/scalable/mimetypes/org.keepassxc.KeePassXC.svgz
diff --git a/share/linux/keepassxc.xml b/share/linux/org.keepassxc.KeePassXC.xml
similarity index 85%
rename from share/linux/keepassxc.xml
rename to share/linux/org.keepassxc.KeePassXC.xml
index b26b4db2..b582e710 100644
--- a/share/linux/keepassxc.xml
+++ b/share/linux/org.keepassxc.KeePassXC.xml
@@ -3,6 +3,6 @@
   <mime-type type="application/x-keepass2">
     <comment>KeePass 2 Database</comment>
     <glob pattern="*.kdbx"/>
-    <icon name="application-x-keepassxc"/>
+    <icon name="org.keepassxc.KeePassXC"/>
   </mime-type>
 </mime-info>
-- 
2.20.1

